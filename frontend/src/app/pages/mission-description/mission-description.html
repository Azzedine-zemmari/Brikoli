<!-- Top Navigation -->
<header  class="sticky top-0 z-50 w-full bg-white border-b border-slate-200 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-8 h-16 flex items-center justify-between gap-4">
        <div class="flex items-center gap-8 flex-1">
            <!-- Logo -->
            <a class="flex items-center gap-2.5 group shrink-0" href="#">
                <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center shadow-sm group-hover:bg-blue-700 transition-colors">
                    <span class="material-symbols-outlined text-white text-[18px]">handyman</span>
                </div>
                <h2 class="text-lg font-black tracking-tight text-slate-900">Brikoli</h2>
            </a>
            <!-- Search Bar -->
            <div class="hidden md:flex items-center bg-slate-100 rounded-xl h-10 px-3 gap-2 w-72 focus-within:ring-2 focus-within:ring-blue-500/30 focus-within:bg-white border border-transparent focus-within:border-blue-200 transition-all">
                <span class="material-symbols-outlined text-slate-400 text-[18px]">search</span>
                <input
                    class="bg-transparent text-sm text-slate-700 placeholder:text-slate-400 outline-none w-full border-none focus:ring-0"
                    placeholder="Search missions..." />
            </div>
        </div>
        <!-- Navigation Links -->
        <div class="flex items-center gap-6">
            <nav class="hidden lg:flex items-center gap-7">
                <a class="text-sm font-semibold text-slate-600 hover:text-blue-600 transition-colors" href="#">Find Missions</a>
                <a class="text-sm font-semibold text-slate-600 hover:text-blue-600 transition-colors" href="#">My Proposals</a>
                <a class="text-sm font-semibold text-slate-600 hover:text-blue-600 transition-colors relative" href="#">
                    Messages
                    <span class="absolute -top-1 -right-2.5 w-2 h-2 bg-red-500 rounded-full ring-2 ring-white"></span>
                </a>
            </nav>
            <!-- User Profile -->
            <div class="pl-5 border-l border-slate-200 shrink-0">
                <div class="bg-center bg-no-repeat bg-cover rounded-full w-9 h-9 ring-2 ring-blue-200 cursor-pointer hover:ring-blue-400 transition-all"
                    data-alt="User profile picture of a smiling professional"
                    style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBTa7hhaF7xaZ6T7UUa-CXQ7BbXwKywDTIPxkGIId5pRFcI1EehEGahcomNGhSC5P2lwsvQetm_AqiOaLxx4VDhYy31TI09UjSLVd8ZzoMEV00dWClLt4gsA3P4etOBI5YyjgkpIf0q2kGyYHUIeuXnrvr7ww9hFuTnHXn1kLAa1Ia6ptNti77D3UWRNpyr5Qlmj0s3QXt7sxNs-FsYRBSYymktqv7_91MpYJBT5eFFeoqUrvQ5pX9cCgn0wbX4EjvobDBiAeKM-q-B");'>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Main Layout -->
<main *ngIf="mission" class="flex-1 w-full max-w-7xl mx-auto px-4 sm:px-8 py-8">
    <!-- Breadcrumbs -->
    <nav class="mb-7 flex items-center flex-wrap gap-1.5 text-sm">
        <a class="text-slate-400 hover:text-blue-600 transition-colors" href="#">Home</a>
        <span class="material-symbols-outlined text-slate-300 text-[15px]">chevron_right</span>
        <a class="text-slate-400 hover:text-blue-600 transition-colors" href="#">Missions</a>
        <span class="material-symbols-outlined text-slate-300 text-[15px]">chevron_right</span>
        <span class="font-semibold text-slate-700">Fix Kitchen Sink Leakage</span>
    </nav>

    <div  class="grid grid-cols-1 lg:grid-cols-12 gap-7">
        <!-- LEFT COLUMN: Content (8 cols) -->
        <div class="lg:col-span-8 space-y-6">
            <!-- Header Card -->
            <div class="bg-white rounded-2xl p-6 md:p-8 shadow-sm border border-slate-100">
                <div class="flex flex-col gap-4">
                    <!-- Chips -->
                    <div class="flex flex-wrap gap-2">
                        <div class="inline-flex h-7 items-center px-3 rounded-full bg-emerald-50 text-emerald-700 text-xs font-bold uppercase tracking-wide border border-emerald-200">
                            Open for Proposals
                        </div>

                        <div *ngIf="mission.urgency =='URGENT'" class="inline-flex h-7 items-center px-3 rounded-full bg-red-50 text-red-600 text-xs font-bold uppercase tracking-wide border border-red-200 gap-1">
                            <span class="material-symbols-outlined text-[14px]">bolt</span>
                            Urgent
                        </div>
                        <div *ngIf="mission.urgency =='NORMAL'" class="inline-flex h-7 items-center px-3 rounded-full bg-blue-50 text-blue-600 text-xs font-bold uppercase tracking-wide border border-blue-200 gap-1">
                            Normal
                        </div>
                    </div>
                    <div class="flex justify-between items-start gap-4">
                        <h1 class="text-2xl md:text-3xl font-black tracking-tight text-slate-900 leading-tight">
                            {{mission.title}}
                        </h1>
                    </div>
                    <div class="flex flex-wrap items-center gap-x-5 gap-y-2 text-sm text-slate-500">
                        <span class="flex items-center gap-1.5">
                            <span class="material-symbols-outlined text-[17px] text-slate-400">schedule</span>
                            Posted {{timeService.getTimeAgo(mission.created_at)}} ago
                        </span>
                        <span class="flex items-center gap-1.5">
                            <span class="material-symbols-outlined text-[17px] text-slate-400">location_on</span>
                            {{mission.location}}
                        </span>
                        <span class="flex items-center gap-1.5 text-blue-600 font-medium">
                            <span class="material-symbols-outlined text-[17px]">visibility</span>
                            14 Views
                        </span>
                    </div>
                </div>
            </div>

            <!-- Description Card -->
            <div class="bg-white rounded-2xl p-6 md:p-8 shadow-sm border border-slate-100">
                <h3 class="text-base font-bold text-slate-900 mb-4 flex items-center gap-2">
                    <span class="w-1 h-5 bg-blue-600 rounded-full inline-block"></span>
                    Description
                </h3>
                <div class="text-slate-600 leading-relaxed text-sm">
                    <p class="mb-4">
                        {{mission.description}}
                    </p>
                </div>
                <!-- Attachments -->
                <div class="mt-7 pt-6 border-t border-slate-100">
                    <h4 class="text-sm font-bold text-slate-700 mb-3">Attachments</h4>
                    <div class="flex flex-wrap gap-3">
                        <img [src]="`http://localhost:8080/uploads/`+mission.imageName" alt="">
                    </div>
                </div>
            </div>

            <!-- Skills & Map -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Map/Location -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-100 flex flex-col h-full">
                    <h3 class="text-base font-bold text-slate-900 mb-4 flex items-center gap-2">
                        <span class="w-1 h-5 bg-blue-600 rounded-full inline-block"></span>
                        Location
                    </h3>
                    <div class="flex-1 rounded-xl overflow-hidden bg-slate-100 relative min-h-[150px] border border-slate-200">
                        <iframe width="100%" height="100%" style="border:0" loading="lazy" allowfullscreen
                            [src]="'https://www.google.com/maps?q=' + mission.location + '&output=embed' | safeUrl">
                        </iframe>
                    </div>
                    <p class="text-xs text-slate-400 mt-3 flex items-start gap-1.5">
                        <span class="material-symbols-outlined text-[15px] shrink-0 mt-0.5">info</span>
                        Specific address will be revealed after proposal acceptance.
                    </p>
                </div>
            </div>

            <!-- Similar Missions -->
            <div class="pt-2">
                <h3 class="text-xl font-black text-slate-900 mb-5">Similar Missions</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Card 1 -->
                    <div class="bg-white rounded-2xl p-5 border border-slate-100 hover:border-blue-300 hover:shadow-md transition-all cursor-pointer group">
                        <div class="flex justify-between items-center mb-3">
                            <span class="bg-blue-50 text-blue-700 text-xs font-bold px-2.5 py-1 rounded-lg border border-blue-100">PLUMBING</span>
                            <span class="text-xs text-slate-400">1 day ago</span>
                        </div>
                        <h4 class="font-bold text-slate-900 group-hover:text-blue-600 transition-colors mb-1">Install Bathroom Faucet</h4>
                        <p class="text-sm text-slate-500 mt-1 line-clamp-2 leading-relaxed">Need to replace an old bathroom faucet with a new mixer tap.</p>
                        <div class="flex items-center gap-2 mt-4 pt-3 border-t border-slate-100">
                            <span class="material-symbols-outlined text-slate-300 text-[18px]">payments</span>
                            <span class="text-sm font-bold text-slate-800">200 MAD</span>
                        </div>
                    </div>
                    <!-- Card 2 -->
                    <div class="bg-white rounded-2xl p-5 border border-slate-100 hover:border-orange-300 hover:shadow-md transition-all cursor-pointer group">
                        <div class="flex justify-between items-center mb-3">
                            <span class="bg-orange-50 text-orange-600 text-xs font-bold px-2.5 py-1 rounded-lg border border-orange-100">ELECTRICITY</span>
                            <span class="text-xs text-slate-400">3 hours ago</span>
                        </div>
                        <h4 class="font-bold text-slate-900 group-hover:text-orange-600 transition-colors mb-1">Fix Wall Socket</h4>
                        <p class="text-sm text-slate-500 mt-1 line-clamp-2 leading-relaxed">Wall socket in the living room is sparking. Need immediate fix.</p>
                        <div class="flex items-center gap-2 mt-4 pt-3 border-t border-slate-100">
                            <span class="material-symbols-outlined text-slate-300 text-[18px]">payments</span>
                            <span class="text-sm font-bold text-slate-800">150 MAD</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RIGHT COLUMN: Sidebar (4 cols) -->
        <div class="lg:col-span-4 relative">
            <div class="sticky top-24 space-y-5">
                <!-- Action Card -->
                <div class="bg-white rounded-2xl shadow-lg border border-blue-100 overflow-hidden">
                    <div class="p-6">
                        <div class="mb-1 text-xs font-bold text-slate-400 uppercase tracking-widest">Mission Budget</div>
                        <div class="flex items-baseline gap-1 mb-6">
                            <span class="text-4xl font-black text-blue-600">{{mission.budget_min}} - {{mission.budget_max}}</span>
                            <span class="text-base font-bold text-slate-700 ml-1">MAD</span>
                        </div>
                        <button class="w-full bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white font-bold py-3.5 px-4 rounded-xl shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2 mb-3">
                            <span class="material-symbols-outlined text-[20px]">send</span>
                            Submit Proposal
                        </button>
                        <button class="w-full bg-white border border-slate-200 text-slate-700 font-semibold py-3 px-4 rounded-xl hover:bg-slate-50 transition-all flex items-center justify-center gap-2 text-sm">
                            <span class="material-symbols-outlined text-slate-400 text-[20px]">bookmark_border</span>
                            Save for Later
                        </button>
                    </div>
                    <div class="bg-slate-50 px-6 py-3 border-t border-slate-100 flex items-center justify-center gap-2">
                        <span class="material-symbols-outlined text-emerald-500 text-[18px]">verified_user</span>
                        <span class="text-xs font-semibold text-slate-500">Payment secured by Brikoli</span>
                    </div>
                </div>

                <!-- Client Card -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">About the Client</h4>
                    <div class="flex items-center gap-3 mb-5">
                        <div class="relative shrink-0">
                            <div class="w-14 h-14 rounded-full bg-cover bg-center ring-2 ring-slate-100"
                                data-alt="Profile picture of the client Amine T"
                                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCDQQhPwBCp0PVTEJ_ierrfinTr8zlatw_FltJqejYMwfyT3qhA1Xf0J-xQNT44pgVzpXxmotdU-qrBQOqQRx5V-MB95Qn6PKcMDy7wSjcQk4h4u0F3paI0bxRSrlgHecLfeNsnkSzW6JNKw1uR17r2Occ94IOblifcW1bLE-tTYseCzzy8IINPFFoyPOBDeY-L6HMFmnA8c7NwhSyHfB9BO8tO-XFTGapwM0CCXZ4SbJnRpa7CKMvWIeo3tS0ROEE8dAlmVx8bzpET");'>
                            </div>
                            <div class="absolute -bottom-0.5 -right-0.5 bg-white rounded-full p-0.5 shadow-sm border border-slate-100">
                                <span class="material-symbols-outlined text-blue-500 text-[18px]">check_circle</span>
                            </div>
                        </div>
                        <div>
                            <h5 class="font-bold text-lg text-slate-900 leading-tight">{{userData.firstName}} {{userData.lastName}}</h5>
                        </div>
                    </div>
                    <div class="space-y-2.5 py-4 border-t border-slate-100">
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Missions posted</span>
                            <span class="font-semibold text-slate-800">{{userData.missionNumber}}</span>
                        </div>
                    </div>
                    <button class="w-full mt-3 py-2.5 rounded-xl border border-blue-200 text-blue-600 text-sm font-bold hover:bg-blue-50 transition-colors">
                        Contact Client
                    </button>
                </div>

                <!-- Safety Tip -->
                <div class="bg-blue-50 rounded-2xl p-4 border border-blue-100 flex gap-3">
                    <span class="material-symbols-outlined text-blue-500 shrink-0 text-[20px] mt-0.5">info</span>
                    <p class="text-xs text-blue-800 leading-relaxed">
                        <span class="font-bold">Safety Tip:</span> Always keep communications and payments within
                        Brikoli to be protected by our guarantee.
                    </p>
                </div>
            </div>
        </div>
    </div>
</main>